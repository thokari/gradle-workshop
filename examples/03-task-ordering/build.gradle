task doSomething {
    doLast {
        println 'Doing something!'
    }
}

task prepareSomething {
    doLast {
        println 'Preparing...'
    }
}

task preprepareSomething {
    doLast {
        println 'Pre-preparing...'
    }
}

doSomething.dependsOn prepareSomething

prepareSomething {
    dependsOn preprepareSomething
}

task runFirst {
    doLast {
        println 'First!'
    }
}

task runSecond {
    doLast {
        println 'Second!'
    }
}

runSecond.mustRunAfter runFirst

task integrationTest {
    onlyIf { new Random().nextBoolean() }
    doLast { println 'Testing...' }
}
